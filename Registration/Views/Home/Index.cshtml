@model Registration.Models.Kompressor

<script src="http://code.jquery.com/jquery-1.10.1.min.js"></script>
<script type="text/javascript" charset="utf-8" src="http://cdn.sencha.io/ext-4.2.0-gpl/ext-all.js"></script>
<script type="text/javascript" src="../../UI/scripts/request.js"></script>
<link rel="stylesheet" type="text/css" href="../../UI/css/main.css" />
<link rel="stylesheet" type="text/css" href="../../UI/css/ext-all.css">
<div id="form-wrapp">
    <div class="menu">
        <span class='input active'>Введення даних</span> <span class='output'>Отримані результати</span>
    </div>
    @using (Html.BeginForm("LogOut", "Home"))
    { 
        <input type="submit" value="logout" class="logout" />
    }
    @using (Html.BeginForm("InsertCompressorCharacter", "Home"))
    {
        @Html.LabelFor(m => m.PressIn)
        @Html.TextBoxFor(m => m.PressIn)
        @Html.ValidationMessageFor(m => m.PressIn)
        @Html.LabelFor(m => m.Performance)
        @Html.TextBoxFor(m => m.Performance)
        @Html.LabelFor(m => m.PressOut)
        @Html.TextBoxFor(m => m.PressOut)
        @Html.LabelFor(m => m.Drive)
        @Html.TextBoxFor(m => m.Drive)
        <input type="submit" />
    }
    @using (Html.BeginForm("Upload", "Home", FormMethod.Post, new { enctype = "multipart/form-data" }))
    { 

        <input type="file" name="FileUpload" />
        <input type="submit" name="Submit" id="Submit" value="Upload" />

    }
    <div class="selectCompr">
        @using (Html.BeginForm("SelectCompressor", "Home"))
        { 
            @Html.TextBoxFor(c => c.PressIn)
        }
    </div>
    <a href="/Home/History">Download History</a>
    <div id="response">
    </div>
</div>
<script type="text/javascript">
    $(document).ready(function () {
        $('.output').click(function () {
            $('#form-wrapp form').hide();
            $('#response').show();
            $('.output').addClass("active");
            $('.input').removeClass("active");

        });
        $('.input').click(function () {
            $('#form-wrapp form').show();
            $('#response').hide();
            $('.input').addClass("active");
            $('.output').removeClass("active");
        });
    });
    $('.selectCompr form').submit(function (event) {
        event.preventDefault();
        @{var baseUrl = @Url.Action("SelectCompressor", "Home");}
         var data = $(".selectCompr form input:first").val();
         $('#form-wrapp form').hide();
            $('#response').empty();
            $('#response').show();

            $('.output').addClass("active");
            $('.input').removeClass("active");
            var response = document.getElementById("response");
            //request('@baseUrl?compressorPress='+data, response ,data);
            $.ajax({
                data: data,
                url: '@baseUrl?compressorPress='+data,
                type: "GET",
                success: function (result) {
                var dataItems = new Array();
                for (var i = 0; i< result.length; i++){
                            dataItems[i] = {
                            html : result[i].PressOut , 
                            width:'100%',
                            height: 200,
                            layout: {
                                type: 'hbox'
                            },
                            bodyStyle: {lineHeight: '160px'},
                            items:[{html:'Type of the compressor', height:180, width: 180,style: { color: '#000',backgroundColor:'#BBB',borderRadius: 20,textAlign: 'center', border: '15px solid #6699CC', margin: 5}, bodyStyle: {background: '#BBB', lineHeight: '120px'}}], 
                            defaultMargins: 10, 
                            flex: 1, 
                            split: true,
                            style: { color: '#000',backgroundColor:'#FFF',borderRadius: 20,textAlign: 'center', border: '5px solid', margin: 5},
                            
                            
                        };
                    }
                        Ext.create('Ext.panel.Panel', {
                        renderTo : response,
                        layout: 'vbox',
                        
                        listeners: {
                            afterrender: function(component){
                                Ext.each(component, function(item){
                                    item = Ext.get(item.id);
                                    item.on('click',function(){this.flex = 2;});
                                });
                            }
                        },
                        componentCls: 'boxes',
                        style:{
                            border: 0
                        },
                        bodyStyle: {
                            background: '#6699CC',
                            padding: '10px'
                        },
                        items:dataItems

                      });
                      
                     }  
                    });
        });
</script>
